<UserControl x:Class="CashierRegister.Views.Setting.GiftCard"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:mui="http://firstfloorsoftware.com/ModernUI"
             xmlns:viewModel = "clr-namespace:CashierRegister.ViewModel"
             xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
             xmlns:Helper = "clr-namespace:CashierRegister.Helpers" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Loaded">
            <i:InvokeCommandAction Command="{Binding formLoadCmd}"></i:InvokeCommandAction>
        </i:EventTrigger>
        <i:EventTrigger EventName="Unloaded">
            <i:InvokeCommandAction Command="{Binding formUnloadedCmd}"></i:InvokeCommandAction>
        </i:EventTrigger>
    </i:Interaction.Triggers>
    <UserControl.DataContext>
        <viewModel:GiftCardViewModel/>
    </UserControl.DataContext>
    <UserControl.Resources>
        <Helper:EnumMatchToBooleanConverter x:Key="ConverterBool"></Helper:EnumMatchToBooleanConverter>
    </UserControl.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"></ColumnDefinition>
            <ColumnDefinition Width="270"></ColumnDefinition>
        </Grid.ColumnDefinitions>
        <Grid Style="{StaticResource ContentRoot}" Margin="0">
            <mui:ModernProgressRing x:Name="mpr" Width="100" Margin="0,0,0,56" Height="100" IsActive="False" Style="{StaticResource CircleProgressRingStyle}"></mui:ModernProgressRing>
            <Grid x:Name="grContent">
                <Grid.RowDefinitions>
                    <RowDefinition Height="45"></RowDefinition>
                    <RowDefinition Height="*"></RowDefinition>
                    <RowDefinition Height="50"></RowDefinition>
                </Grid.RowDefinitions>
                <Grid Background="WhiteSmoke">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="250"></ColumnDefinition>
                        <ColumnDefinition Width="*"></ColumnDefinition>
                        <ColumnDefinition Width="250"></ColumnDefinition>
                    </Grid.ColumnDefinitions>

                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Margin="2,0,0,0">
                        <mui:ModernButton x:Name="muiBtnDelete" Command="{Binding deleteGiftCardCmd}" EllipseDiameter="35" IconHeight="20" IconWidth="20" Margin="0,0,10,0" VerticalAlignment="Center" IconData="M469.314,171.95L469.314,675.277 575.603,675.277 575.603,171.95z M203.347,171.95L203.347,675.277 309.686,675.277 309.686,171.95z M211.071,0L567.926,0 567.926,83.6537 779,83.6537 779,171.95 714.002,171.95 714.002,779 64.9982,779 64.9982,171.95 0,171.95 0,83.6537 211.071,83.6537z">
                            <mui:ModernButton.ToolTip>
                                <TextBlock Text="{DynamicResource del_gift_card}"></TextBlock>
                            </mui:ModernButton.ToolTip>
                        </mui:ModernButton>
                        <mui:ModernButton x:Name="muiBtnAdd" Command="{Binding addGiftCardCmd}" EllipseDiameter="35" IconHeight="20" IconWidth="20" Grid.Column="2" HorizontalAlignment="Center" VerticalAlignment="Center" IconData="M19.833,0L32.501,0 32.501,19.833999 52.334,19.833999 52.334,32.500999 32.501,32.500999 32.501,52.333 19.833,52.333 19.833,32.500999 0,32.500999 0,19.833999 19.833,19.833999z">
                            <mui:ModernButton.ToolTip>
                                <TextBlock Text="{DynamicResource add_gift_card}"></TextBlock>
                            </mui:ModernButton.ToolTip>
                        </mui:ModernButton>
                        <mui:ModernButton  x:Name="muiBtnPrint" Command="{Binding printMultiGiftCardCmd}" Grid.Column="2" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="10,0,0,0" EllipseDiameter="35" IconHeight="20" IconWidth="20" IconData="M30.754,48.363001L42.636803,48.363001 42.935001,49.115 30.754,49.115z M21.746382,48.363001L27.137999,48.363001 27.137999,49.115 21.429998,49.115z M20.6849,45.4153L17.523399,51.042898 46.934898,51.042898 43.773399,45.4153 39.369801,45.4153 39.369801,45.790197 22.7057,45.790197 22.8633,45.4153z M18.976601,25.266799C17.4596,25.266799,16.2292,26.4987,16.2292,28.015599L16.2292,37.561098C16.2292,39.079397,17.4596,40.309797,18.976601,40.309797L21.2995,40.309797 43.158798,40.309797 45.4818,40.309797C46.997398,40.309797,48.229198,39.079397,48.229198,37.561098L48.229198,28.015599C48.229198,26.4987,46.997398,25.266799,45.4818,25.266799z M2.7473803,14.789L61.251301,14.789C62.770802,14.789,64,16.019401,64,17.536401L64,42.666498C64,44.184797,62.770802,45.4153,61.251301,45.4153L46.026001,45.4153 50.2878,53.004999 14.1706,53.004999 18.432301,45.4153 2.7473803,45.4153C1.23175,45.4153,0,44.184797,0,42.666498L0,17.536401C0,16.019401,1.23175,14.789,2.7473803,14.789z M48.229,4.7119999L51.174999,4.7119999 51.174999,13.610999 48.229,13.610999z M12.697,4.7119999L15.642,4.7119999 15.642,13.610999 12.697,13.610999z M17.98934,0L46.010761,0C46.987385,0,47.778999,0.79034328,47.778999,1.7669096L47.778999,11.254 16.221001,11.254 16.221001,1.7669096C16.221001,0.79034328,17.012718,0,17.98934,0z">
                            <mui:ModernButton.ToolTip>
                                <TextBlock Text="{DynamicResource print}"></TextBlock>
                            </mui:ModernButton.ToolTip>
                        </mui:ModernButton>
                        <mui:ModernButton  x:Name="muiBtnSendTo" Command="{Binding sendToMultiGiftCardCmd}" Grid.Column="2" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="10,0,0,0" EllipseDiameter="35" IconHeight="22" IconWidth="22" IconData="M23.699997,15.799994L27.199997,15.799994C29.599991,15.799994,31.699997,17.599979,32,20L18.899994,20C19.300003,17.599979,21.300003,15.799994,23.699997,15.799994z M25.5,7.8999819C27.399994,7.8999819 28.899994,9.3999795 28.899994,11.300001 28.899994,13.199962 27.399994,14.699959 25.5,14.699959 23.599991,14.699959 22.099991,13.199962 22.099991,11.300001 22.099991,9.3999795 23.599991,7.8999819 25.5,7.8999819z M0,1.9999972L6,7.8999819 12.699997,14.500008 19.399994,7.8999819 25.399994,1.9999972 25.5,1.9999972 25.5,6.8000077C23,6.8000077 21,8.8000049 21,11.300001 21,12.699963 21.699997,14.000008 22.699997,14.799995 20.599991,15.199958 18.800003,16.699957 18.099991,18.699953L18.099991,18.79999 0,18.79999z M1.5,0L12.699997,0 24,0 18.399994,5.5999974 12.800003,11.199964 7.0999908,5.5999974z">
                            <mui:ModernButton.ToolTip>
                                <TextBlock Text="{DynamicResource send_email}"></TextBlock>
                            </mui:ModernButton.ToolTip>
                        </mui:ModernButton>
                        <mui:ModernButton  x:Name="muiBtnTools" Command="{Binding toolsGiftCardCmd}" Grid.Column="2" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="10,0,0,0" EllipseDiameter="35" IconHeight="22" IconWidth="22" IconData="M4.9629898,25.440168C4.564003,25.440168 4.0650101,25.640182 3.7659989,25.939165 3.0680008,26.638176 3.0680008,27.635191 3.7659989,28.3342 4.4639969,29.032204 5.4620133,29.032204 6.1600113,28.3342 6.8589859,27.635191 6.8589859,26.638176 6.1600113,25.939165 5.760994,25.640182 5.3620072,25.440168 4.9629898,25.440168z M18.432014,18.457121L22.422005,22.447138 24.816994,22.946165 29.107002,29.431192 27.509987,31.027212 21.025002,26.737175 20.526985,24.343178 16.535988,20.352123z M8.1560135,18.357115L13.643013,23.84415C11.048988,26.638176 8.9539872,28.932196 7.9560013,29.930189 6.359993,31.526207 3.6659928,31.626215 2.070015,29.930189 0.47400668,28.3342 0.47400668,25.640182 2.070015,24.044165z M2.967995,6.7840408C2.768013,6.7840408 2.5690079,6.8840479 2.4690018,6.9840545 2.1699906,7.2830371 2.1699906,7.7820638 2.4690018,8.0810469L11.746986,17.359123C12.047005,17.659113 12.544991,17.659113 12.845009,17.359123 13.14399,17.06011 13.14399,16.561113 12.845009,16.2621L3.5659867,6.9840545C3.3670121,6.8840479,3.1669998,6.7840408,2.967995,6.7840408z M5.2620011,4.4890431C5.0629959,4.4890431 4.8630143,4.5890192 4.7640152,4.6890262 4.3649979,4.9880394 4.3649979,5.4870356 4.7640152,5.8860554L14.042,15.164101C14.341011,15.46409 14.840004,15.46409 15.139015,15.164101 15.439003,14.865087 15.439003,14.366092 15.139015,14.067109L5.8610001,4.6890262C5.661995,4.5890192,5.4620133,4.4890431,5.2620011,4.4890431z M4.3649979,2.3940283C5.4620133,2.3940281,6.5589981,2.7930175,7.3580094,3.5920337L19.328987,15.46409 13.342995,21.450153 1.2720107,9.6770657C-0.42400357,7.9810704 -0.42400357,5.2880291 1.2720107,3.6910337 2.1699906,2.7930175 3.267006,2.3940281 4.3649979,2.3940283z M24.217995,0C25.31501,-8.5992724E-08,26.312996,0.20001344,27.211006,0.59900296L23.021004,4.7890328C22.223,5.5870422,22.223,6.7840408,23.021004,7.4820436L24.617012,9.079069C25.414986,9.8770789,26.612007,9.8770789,27.311012,9.079069L31.501015,4.9880394C31.799995,5.8860554 32.000008,6.7840408 32.000008,7.7820638 32.000008,12.07207 28.508003,15.564097 24.217995,15.564097 19.927986,15.564097 16.436012,12.07207 16.436012,7.7820638 16.436012,3.4920272 19.927986,-8.5992724E-08 24.217995,0z">
                            <mui:ModernButton.ToolTip>
                                <TextBlock Text="{DynamicResource single_tools}"></TextBlock>
                            </mui:ModernButton.ToolTip>
                        </mui:ModernButton>
                    </StackPanel>

                    <TextBlock x:Name="tblTotal" Style="{StaticResource Heading2}" Grid.Column="1" Text="{Binding TotalGiftCard}" FontWeight="Bold" Foreground="Firebrick" HorizontalAlignment="Center" VerticalAlignment="Center"></TextBlock>

                    <StackPanel Grid.Column="2" VerticalAlignment="Center" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,0,15,0">
                        <TextBlock Text="{DynamicResource giftcard_sortby}" Margin="0 2 5 0"></TextBlock>
                        <ComboBox x:Name="cbSortby" ItemsSource="{Binding SortByListEnum}" DisplayMemberPath="ValueSortByString" SelectedValuePath="ValueSortByEnum" SelectedValue="{Binding SearchSortBy, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="170">
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="SelectionChanged">
                                    <i:InvokeCommandAction Command="{Binding sortByGiftCardCmd}" CommandParameter="{Binding SelectedValuePath, ElementName=cbSortby}"></i:InvokeCommandAction>
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                        </ComboBox>
                    </StackPanel>

                </Grid>
                <DataGrid x:Name="dgGiftCard" SelectionMode="Single" ItemsSource="{Binding GiftCard, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" SelectedItem="{Binding SelectedGiftCard}" Margin="5,20,0,0" AutoGenerateColumns="False" HeadersVisibility="Column" CanUserAddRows="False" Grid.Row="1" ScrollViewer.HorizontalScrollBarVisibility="Auto">
                    <i:Interaction.Triggers>
                        <i:EventTrigger EventName="MouseDoubleClick">
                            <i:InvokeCommandAction Command="{Binding Path=DataContext.dbCLickCmd, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type DataGrid}}}" CommandParameter="{Binding SelectedItem, ElementName=dgGiftCard}"></i:InvokeCommandAction>
                        </i:EventTrigger>
                    </i:Interaction.Triggers>
                    <DataGrid.Columns>
                        <DataGridTemplateColumn>
                            <DataGridTemplateColumn.Header>
                                <CheckBox x:Name="chkCheckAll" Visibility="Visible" IsChecked="{Binding DataContext.IsCheckAll, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type DataGrid}}}">
                                    <CheckBox.ToolTip>
                                        <TextBlock Text="{DynamicResource check_all}"></TextBlock>
                                    </CheckBox.ToolTip>
                                </CheckBox>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <CheckBox VerticalAlignment="Center" Margin="4,0,0,0" IsChecked="{Binding IsChecked, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                        <CheckBox.ToolTip>
                                            <TextBlock Text="{DynamicResource sel_this_giftcard}"></TextBlock>
                                        </CheckBox.ToolTip>
                                    </CheckBox>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <!--<DataGridTemplateColumn>
                            <DataGridTemplateColumn.Header>
                                <TextBlock Text="{DynamicResource no_title}"></TextBlock>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding No}" VerticalAlignment="Center"></TextBlock>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>-->

                        <DataGridTemplateColumn>
                            <DataGridTemplateColumn.Header>
                                <TextBlock Text="{DynamicResource barcode}"></TextBlock>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Barcode}" VerticalAlignment="Center"></TextBlock>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn>
                            <DataGridTemplateColumn.Header>
                                <TextBlock Text="{DynamicResource serial_number}"></TextBlock>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Serial}" VerticalAlignment="Center"></TextBlock>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn>
                            <DataGridTemplateColumn.Header>
                                <TextBlock Text="{DynamicResource created}"></TextBlock>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding CreateDate}" VerticalAlignment="Center"></TextBlock>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn>
                            <DataGridTemplateColumn.Header>
                                <TextBlock Text="{DynamicResource expiration}"></TextBlock>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding ExpirationDate}" VerticalAlignment="Center"></TextBlock>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn>
                            <DataGridTemplateColumn.Header>
                                <TextBlock Text="{DynamicResource amount}"></TextBlock>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition></ColumnDefinition>
                                            <ColumnDefinition></ColumnDefinition>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="{Binding Path = DataContext.ShowCurency, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type DataGrid}}}" VerticalAlignment="Center" HorizontalAlignment="Right"></TextBlock>
                                        <TextBlock Text="{Binding Amount}" Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Left"></TextBlock>
                                    </Grid>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn>
                            <DataGridTemplateColumn.Header>
                                <TextBlock Text="{DynamicResource giftcard_balance}"></TextBlock>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition></ColumnDefinition>
                                            <ColumnDefinition></ColumnDefinition>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="{Binding Path = DataContext.ShowCurency, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type DataGrid}}}" VerticalAlignment="Center" HorizontalAlignment="Right"></TextBlock>
                                        <TextBlock Text="{Binding Balance}" Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Left"></TextBlock>
                                    </Grid>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        <DataGridTemplateColumn>
                            <DataGridTemplateColumn.Header>
                                <Grid Width="150">
                                    <TextBlock Text="{DynamicResource actions}" HorizontalAlignment="Center"></TextBlock>
                                </Grid>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Grid Width="200">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition></ColumnDefinition>
                                            <ColumnDefinition></ColumnDefinition>
                                            <ColumnDefinition></ColumnDefinition>
                                            <ColumnDefinition></ColumnDefinition>
                                        </Grid.ColumnDefinitions>
                                        <Button VerticalAlignment="Center" HorizontalAlignment="Center" Background="Transparent" BorderBrush="Transparent" BorderThickness="0" Command="{Binding Path=DataContext.editGiftCardCmd, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type DataGrid}}}" CommandParameter="{Binding SelectedItem, ElementName=dgGiftCard}">
                                            <Image Source="pack://application:,,,/Resources/edit.png" Width="18" Height="18" HorizontalAlignment="Center"></Image>
                                            <Button.ToolTip>
                                                <TextBlock Text="{DynamicResource edit_giftcard}"></TextBlock>
                                            </Button.ToolTip>
                                        </Button>
                                        <Button Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Center" Background="Transparent" BorderBrush="Transparent" BorderThickness="0" Command="{Binding Path=DataContext.delGiftCardByOneCmd, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type DataGrid}}}" CommandParameter="{Binding SelectedItem, ElementName=dgGiftCard}">
                                            <Image Source="pack://application:,,,/Resources/delete.png" Width="18" Height="18" HorizontalAlignment="Center"></Image>
                                            <Button.ToolTip>
                                                <TextBlock Text="{DynamicResource del_giftcard}"></TextBlock>
                                            </Button.ToolTip>
                                        </Button>
                                        <Button Uid="{Binding GiftCardID}" x:Name="btViewGiftcard" Grid.Column="2" VerticalAlignment="Center" HorizontalAlignment="Center" Background="Transparent" BorderBrush="Transparent" BorderThickness="0" Command="{Binding Path=DataContext.viewGiftCardCmd, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type DataGrid}}}" CommandParameter="{Binding Uid, ElementName=btViewGiftcard}">
                                            <Image Source="pack://application:,,,/Resources/Print_black.png" Width="18" Height="18" HorizontalAlignment="Center"></Image>
                                            <Button.ToolTip>
                                                <TextBlock Text="{DynamicResource print_this_card}"></TextBlock>
                                            </Button.ToolTip>
                                        </Button>
                                        <Button Uid="{Binding GiftCardID}" x:Name="bt_ViewGiftcard" Grid.Column="3" VerticalAlignment="Center" HorizontalAlignment="Center" Background="Transparent" BorderBrush="Transparent" BorderThickness="0" Command="{Binding Path=DataContext.preViewGiftCardCmd, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type DataGrid}}}" CommandParameter="{Binding Uid, ElementName=bt_ViewGiftcard}">
                                            <Image Source="pack://application:,,,/Resources/send_to.png" Width="18" Height="18" HorizontalAlignment="Center"></Image>
                                            <Button.ToolTip>
                                                <TextBlock Text="{DynamicResource send_this_card}"></TextBlock>
                                            </Button.ToolTip>
                                        </Button>
                                    </Grid>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn>
                            <DataGridTemplateColumn.Header>
                                <TextBlock Text="{DynamicResource used_by}"></TextBlock>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding CustomerName}" VerticalAlignment="Center"></TextBlock>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn>
                            <DataGridTemplateColumn.Header>
                                <TextBlock Text="{DynamicResource single_delivered}" HorizontalAlignment="Center"></TextBlock>
                            </DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding DeliveredDate}" Grid.Column="1" VerticalAlignment="Center" HorizontalAlignment="Left"></TextBlock>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        
                    </DataGrid.Columns>
                </DataGrid>

                <!--<CheckBox Margin="14,28,0,0" Grid.Row="1" VerticalAlignment="Top" IsChecked="{Binding IsCheckAll, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                    <CheckBox.ToolTip>
                        <TextBlock Text="{DynamicResource select_all}"></TextBlock>
                    </CheckBox.ToolTip>
                </CheckBox>-->

                <Border VerticalAlignment="Bottom" Background="#FF3f7224" Margin="0,5,0,0" Grid.Row="2" Grid.ColumnSpan="2" Visibility="{Binding IsPaging, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                    <StackPanel x:Name="stpPaging" Orientation="Horizontal" HorizontalAlignment="Center" Background="Transparent" Height="30">

                        <Image x:Name="imgPreviousFirst" HorizontalAlignment="Center" Width="18" Height="18" IsEnabled="{Binding ShowFirstPage, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Image.Style>
                                <Style TargetType="Image">
                                    <Setter Property="Source" Value="pack://application:,,,/Resources/be_previous_first.png"></Setter>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Source" Value="pack://application:,,,/Resources/af_previous_first.png"></Setter>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Image.Style>
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="MouseLeftButtonDown">
                                    <i:InvokeCommandAction Command="{Binding pagingCmd}" CommandParameter="First"></i:InvokeCommandAction>
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                            <Image.ToolTip>
                                <TextBlock Text="First page"></TextBlock>
                            </Image.ToolTip>
                        </Image>

                        <Image x:Name="imgPrevious" Margin="10 0 0 0" HorizontalAlignment="Center" Width="18" Height="18" IsEnabled="{Binding ShowPrevPage, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Image.Style>
                                <Style TargetType="Image">
                                    <Setter Property="Source" Value="pack://application:,,,/Resources/be_previous.png"></Setter>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Source" Value="pack://application:,,,/Resources/af_previous.png"></Setter>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Image.Style>
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="MouseLeftButtonDown">
                                    <i:InvokeCommandAction Command="{Binding pagingCmd}" CommandParameter="Previous"></i:InvokeCommandAction>
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                            <Image.ToolTip>
                                <TextBlock Text="Previous page"></TextBlock>
                            </Image.ToolTip>
                        </Image>

                        <TextBlock Text="{Binding ShowCurPage, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" FontWeight="Medium" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="17" Foreground="White" Margin="10, 0, 10, 1"></TextBlock>

                        <Image x:Name="imgNext" Margin="0 0 0 0" HorizontalAlignment="Center" Width="18" Height="18" IsEnabled="{Binding ShowNextPage, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Image.Style>
                                <Style TargetType="Image">
                                    <Setter Property="Source" Value="pack://application:,,,/Resources/be_next.png"></Setter>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Source" Value="pack://application:,,,/Resources/af_next.png"></Setter>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Image.Style>
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="MouseLeftButtonDown">
                                    <i:InvokeCommandAction Command="{Binding pagingCmd}" CommandParameter="Next"></i:InvokeCommandAction>
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                            <Image.ToolTip>
                                <TextBlock Text="Next page"></TextBlock>
                            </Image.ToolTip>
                        </Image>

                        <Image x:Name="imgNextEnd" Margin="10 0 0 0" HorizontalAlignment="Center" Width="18" Height="18" IsEnabled="{Binding ShowLastPage, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                            <Image.Style>
                                <Style TargetType="Image">
                                    <Setter Property="Source" Value="pack://application:,,,/Resources/be_next_end.png"></Setter>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Source" Value="pack://application:,,,/Resources/af_next_end.png"></Setter>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Image.Style>
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="MouseLeftButtonDown">
                                    <i:InvokeCommandAction Command="{Binding pagingCmd}" CommandParameter="Last"></i:InvokeCommandAction>
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                            <Image.ToolTip>
                                <TextBlock Text="Last page"></TextBlock>
                            </Image.ToolTip>
                        </Image>
                    </StackPanel>
                </Border>
            </Grid>
        </Grid>
        <Grid Grid.Column="1" Background="#FF3f7224">
            <Grid.RowDefinitions>
                <RowDefinition Height="45"></RowDefinition>
                <RowDefinition Height="35"></RowDefinition>
                <RowDefinition Height="150"></RowDefinition>
                <RowDefinition Height="250"></RowDefinition>
                <RowDefinition Height="125"></RowDefinition>
                <RowDefinition Height="80"></RowDefinition>
            </Grid.RowDefinitions>
            <TextBlock Text="{DynamicResource giftcard_searchtool}" VerticalAlignment="Center" Margin="10 0 10 0" FontWeight="Bold" Foreground="White" FontSize="20"></TextBlock>

            <TextBox Grid.Row="1" x:Name="txbSearch" Text="" Margin="10,0,10,0" VerticalAlignment="Center" Helper:TextBoxMaskBehavior.Mask="Integer" Helper:TextBoxMaskBehavior.MinimumValue="0" Helper:TextBoxMaskBehavior.MaximumValue="9999999999999">
                <TextBox.InputBindings>
                    <KeyBinding Key="Return" Command="{Binding enterSearchGiftCardCmd}" CommandParameter="{Binding Text, ElementName=txbSearch}"></KeyBinding>
                </TextBox.InputBindings>
                <TextBox.ToolTip>Search for barcode gift cards</TextBox.ToolTip>
            </TextBox>

            <GroupBox Grid.Row="2" Margin="10 5 10 0">
                <GroupBox.Header>
                    <TextBlock Text="{DynamicResource giftcard_searchtool_using}" Style="{StaticResource Heading2}" Foreground="White"></TextBlock>
                </GroupBox.Header>

                <StackPanel Orientation="Vertical" Margin="5 10 5 10" x:Name="stp_storeInfo">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition></RowDefinition>
                            <RowDefinition></RowDefinition>
                            <RowDefinition></RowDefinition>
                            <RowDefinition></RowDefinition> 
                        </Grid.RowDefinitions>
                        <RadioButton Margin="0 5 0 7" IsChecked="{Binding SearchGenaral, Converter={StaticResource ConverterBool}, ConverterParameter={x:Static viewModel:searchGenaral.None}}">
                            <RadioButton.Content>
                                <TextBlock Text="{DynamicResource giftcard_searchtool_allcards}" Foreground="White"></TextBlock>
                            </RadioButton.Content>
                        </RadioButton>
                        <RadioButton Grid.Row="1" Margin="0 0 0 7" IsChecked="{Binding SearchGenaral, Converter={StaticResource ConverterBool}, ConverterParameter={x:Static viewModel:searchGenaral.Expired}}">
                            <RadioButton.Content>
                                <TextBlock Text="{DynamicResource giftcard_searchtool_expiredcards}" Foreground="White"></TextBlock>
                            </RadioButton.Content>
                        </RadioButton>
                        <RadioButton Grid.Row="2" Margin="0 0 0 7" IsChecked="{Binding SearchGenaral, Converter={StaticResource ConverterBool}, ConverterParameter={x:Static viewModel:searchGenaral.InUse}}">
                            <RadioButton.Content>
                                <TextBlock Text="{DynamicResource giftcard_searchtool_inusecards}" Foreground="White"></TextBlock>
                            </RadioButton.Content>
                        </RadioButton>
                        <RadioButton Grid.Row="3" Margin="0 0 0 7" IsChecked="{Binding SearchGenaral, Converter={StaticResource ConverterBool}, ConverterParameter={x:Static viewModel:searchGenaral.IsUsed}}">
                            <RadioButton.Content>
                                <TextBlock Text="{DynamicResource giftcard_searchtool_usedcards}" Foreground="White"></TextBlock>
                            </RadioButton.Content>
                        </RadioButton>
                    </Grid>
                </StackPanel>
            </GroupBox>

            <StackPanel Orientation="Vertical" VerticalAlignment="Top" Grid.Row="3" Margin="10,5,10,0">
                <GroupBox Margin="0 5 0 0">
                    <GroupBox.Header>
                        <TextBlock Text="{DynamicResource created}" Style="{StaticResource Heading2}" Foreground="White"></TextBlock>
                    </GroupBox.Header>
                    <Grid Margin="0 10 0 0">
                        <Grid.RowDefinitions>
                            <RowDefinition></RowDefinition>
                            <RowDefinition></RowDefinition>
                            <RowDefinition></RowDefinition>
                            <RowDefinition></RowDefinition>
                            <RowDefinition></RowDefinition>
                            <RowDefinition></RowDefinition>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="80"></ColumnDefinition>
                            <ColumnDefinition Width="120"></ColumnDefinition>
                            <ColumnDefinition></ColumnDefinition>
                            <!--<ColumnDefinition></ColumnDefinition>-->
                        </Grid.ColumnDefinitions>

                        <RadioButton Margin="5 0 0 10" IsChecked="{Binding SearchCreated, Converter={StaticResource ConverterBool}, ConverterParameter={x:Static viewModel:searchCreated.None}}">
                            <RadioButton.Content>
                                <TextBlock Text="{DynamicResource tool_none}" Foreground="White"></TextBlock>
                            </RadioButton.Content>
                        </RadioButton>

                        <RadioButton Margin="5 -5 0 0" Grid.Row="1" IsChecked="{Binding SearchCreated, Converter={StaticResource ConverterBool}, ConverterParameter={x:Static viewModel:searchCreated.CreatedOn}}" >
                            <RadioButton.Content>
                                <TextBlock Text="{DynamicResource giftcard_searchtool_singleon}" Foreground="White"></TextBlock>
                            </RadioButton.Content>
                        </RadioButton>
                        <DatePicker x:Name="db_createdOn" Margin="0,0,0,7" Grid.Column="1" Grid.Row="1" Text="{Binding SearchCreatedOn, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" IsEnabled="{Binding SearchEnableOn, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"></DatePicker>

                        <RadioButton Grid.Row="2" Margin="5 -5 0 0" IsChecked="{Binding SearchCreated, Converter={StaticResource ConverterBool}, ConverterParameter={x:Static viewModel:searchCreated.Before}}" >
                            <RadioButton.Content>
                                <TextBlock Text="{DynamicResource giftcard_single_before}" Foreground="White"></TextBlock>
                            </RadioButton.Content>
                        </RadioButton>
                        <DatePicker x:Name="db_createdBefore" Margin="0,0,0,7" Grid.Column="1" Grid.Row="2" Text="{Binding SearchCreatedBefore, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" IsEnabled="{Binding SearchEnableBefore, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"></DatePicker>

                        <RadioButton Grid.Row="3" Margin="5 -5 0 0" IsChecked="{Binding SearchCreated, Converter={StaticResource ConverterBool}, ConverterParameter={x:Static viewModel:searchCreated.After}}">
                            <RadioButton.Content>
                                <TextBlock Text="{DynamicResource giftcard_single_after}" Foreground="White"></TextBlock>
                            </RadioButton.Content>
                        </RadioButton>
                        <DatePicker x:Name="db_createdAfter" Margin="0,0,0,7" Grid.Column="1" Grid.Row="3" Text="{Binding SearchCreatedAfter, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" IsEnabled="{Binding SearchEnableAfter, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"></DatePicker>

                        <RadioButton Grid.Row="4" Margin="5 -5 0 0" IsChecked="{Binding SearchCreated, Converter={StaticResource ConverterBool}, ConverterParameter={x:Static viewModel:searchCreated.Between}}">
                            <RadioButton.Content>
                                <TextBlock Text="{DynamicResource giftcard_single_between}" Foreground="White"></TextBlock>
                            </RadioButton.Content>
                        </RadioButton>
                        <DatePicker x:Name="db_createdStart" Margin="0,0,0,7" Grid.Column="1" Grid.Row="4" Text="{Binding SearchCreatedStart, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" IsEnabled="{Binding SearchEnableBetween, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"></DatePicker>
                        <TextBlock Text="{DynamicResource giftcard_single_and}" Margin="10 5 0 0" Grid.Row="4" Grid.Column="2" Foreground="White"></TextBlock>
                        <DatePicker x:Name="db_createdEnd" Margin="0,0,0,7" Grid.Column="1" Grid.Row="5" Text="{Binding SearchCreatedEnd, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" IsEnabled="{Binding SearchEnableBetween, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"></DatePicker>

                    </Grid>
                </GroupBox>
            </StackPanel>

            <GroupBox Grid.Row="4" Margin="10 5 10 0">
                <GroupBox.Header>
                    <TextBlock Text="{DynamicResource giftcard_deliver}" Style="{StaticResource Heading2}" Foreground="White"></TextBlock>
                </GroupBox.Header>

                <StackPanel Orientation="Vertical" Margin="5 10 5 10">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition></RowDefinition>
                            <RowDefinition></RowDefinition>
                            <RowDefinition></RowDefinition>
                            <RowDefinition></RowDefinition>
                        </Grid.RowDefinitions>
                        <RadioButton Margin="0 5 0 7" IsChecked="{Binding SearchDeliver, Converter={StaticResource ConverterBool}, ConverterParameter={x:Static viewModel:searchDeliver.None}}">
                            <RadioButton.Content>
                                <TextBlock Text="{DynamicResource giftcard_searchtool_allcards}" Foreground="White"></TextBlock>
                            </RadioButton.Content>
                        </RadioButton>
                        <RadioButton Grid.Row="1" Margin="0 0 0 7" IsChecked="{Binding SearchDeliver, Converter={StaticResource ConverterBool}, ConverterParameter={x:Static viewModel:searchDeliver.Delivered}}">
                            <RadioButton.Content>
                                <TextBlock Text="{DynamicResource giftcard_been_deliver}" Foreground="White"></TextBlock>
                            </RadioButton.Content>
                        </RadioButton>
                        <RadioButton Grid.Row="2" Margin="0 0 0 7" IsChecked="{Binding SearchDeliver, Converter={StaticResource ConverterBool}, ConverterParameter={x:Static viewModel:searchDeliver.NotDeliver}}">
                            <RadioButton.Content>
                                <TextBlock Text="{DynamicResource giftcard_not_deliver}" Foreground="White"></TextBlock>
                            </RadioButton.Content>
                        </RadioButton>
                    </Grid>
                </StackPanel>
            </GroupBox>

            <StackPanel Orientation="Horizontal" Grid.Row="5" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="0, 10, 10, 0">
                <Button x:Name="muiBtnOK" Width="80" Content="{DynamicResource search}" Margin="0,0,0,0" Command="{Binding advanceSearchCmd}" CommandParameter="{Binding Text, ElementName=txbSearch}" ></Button>
            </StackPanel>
        </Grid>
    </Grid>
</UserControl>
